<div id="content-wrap">
  
    <div class="left-column">
      <% if (user_signed_in? && (current_user.id == @glip.user_id)) %>
        <div class="content-alter">
          <%= link_to edit_glip_path(@glip) do %><i class="fa fa-pencil"></i><% end %> &nbsp;&nbsp;
          <%= link_to glip_path(@glip), method: :delete, data: { confirm: "Are you sure?" } do %><i class="fa fa-trash"></i><% end %>
        </div>
      <% end %>
      
      <div class="title-box">
        <% if @glip.status == "incomplete" %>
          <i class="fa fa-star-half-o"></i>
        <% else %>
          <i class="fa fa-star"></i>
        <% end %>
        <%= @glip.title %>
      </div>
      
      <div class="avatar-show">
        <%= 
          if @glip.user.picture?
            link_to user_path(@glip.user) do
              image_tag @glip.user.picture, width: 84, alt: 'user avatar'
            end
          else
            link_to user_path(@glip.user) do
              image_tag 'default_avatar.jpg', width: 84, alt: 'default user avatar'
            end
          end
        %><div id="small-follow"><%= render 'users/follow_form' if user_signed_in? %></div>
      </div>

      <div class="details-show">
          posted by <%= link_to @glip.user.username, user_path(@glip.user) %>&nbsp;<%= time_ago_in_words(@glip.created_at) %> ago&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          <% if current_user == @glip.user %>  
            <% if @glip.status == "incomplete" %>
              <i class="fa fa-star-half-o"></i>&nbsp;<%= link_to @glip.status, toggle_status_glip_path(@glip) %><br/>
            <% else %>
              <i class="fa fa-star"></i>&nbsp;<%= link_to @glip.status.upcase, toggle_status_glip_path(@glip) %><br/>
            <% end %>
          <% else %>
            <br />
          <% end %>
          
          <% @glip.tag_list.map.each do |tag| %>
            <div class="tags"><%= link_to tag, tag_path(tag) %></div>
          <% end %><br />
          <%= link_to like_glip_path(@glip), method: :put do %><i class="fa fa-chevron-up"></i><% end %>&nbsp;<%= @glip.get_upvotes.size %>&nbsp;&nbsp;
          <%= link_to dislike_glip_path(@glip), method: :put do %><i class="fa fa-chevron-down"></i><% end %>&nbsp;<%= @glip.get_downvotes.size %>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          <i class="fa fa-comments"></i>&nbsp;&nbsp;<%= @glip.comments.count %>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          <i class="fa fa-book"></i>&nbsp;&nbsp;<%= @glip.logs.count %>&nbsp;<%= link_to "logs", glip_logs_path(@glip) %>
      </div>
      
      <div class="content-show">
          <%= markdown @glip.content %>
        <div class="completion-criteria">
          <em>Completion Criteria</em><br /><%= raw(@glip.completion_criteria) %>
        </div>
      </div>
      <div class="content-show">
        <div id="posts-form">
          <%= link_to "New Comment", new_glip_comment_path(@glip), :remote => true %>
          &nbsp;&nbsp;<em><i class="fa fa-comments"></i>&nbsp;&nbsp;<%= @glip.comments.count %> Comments</em>
        </div>
        <div class="comments-wrap">
          <%= render "comments/comments" %>
        </div>
      </div>

    </div>
    
  <div class="right-column">
    <% if (user_signed_in? && (current_user.id == @glip.user_id)) %>
      <div class="log-box">
        <%= render "logs/form" %><br/>
      </div>
    <% end %> 
    
    <div class="side-box">
      <div class="side-content">
        <b><%= @glip.articles.size %> Articles that helped this Glip.</b>
        <% if @glip.articles.size > 0 %>
          <br /><br />
        <% end %>
          <% @articles.each do |article| %>
            <li><%= link_to article.title, article %></li>
           <% end %>
      </div>
    </div>
    <br />
    <div class="side-box">
      <div class="side-content">
        <b><%= @glip.logs.size %> progress logs on this Glip.</b>
            <% @logs.each do |log| %>
              <li><%= log.content.truncate(50) %></li>
            <% end %><br />
        <%= link_to_previous_page @logs, 'Previous' %><%= link_to_next_page @logs, 'Next' %>
      </div>
    </div>
  </div>

</div>